{"version":3,"file":null,"sources":["../src/config.ts","../src/authProvider.ts","../src/utils.ts","../src/shared.ts","../src/local.ts","../src/popup.ts","../src/oauth1.ts","../src/oauth2.ts","../src/oauth.ts","../src/storage.ts","../src/interceptor.ts","../src/httpProviderConfig.ts","../src/ng1.ts"],"sourcesContent":["export default class Config {\n  static get getConstant() {\n    return new Config();\n  }\n\n  baseUrl = '/';\n  loginUrl = '/auth/login';\n  signupUrl = '/auth/signup';\n  unlinkUrl = '/auth/unlink/';\n  tokenName = 'token';\n  tokenPrefix = 'satellizer';\n  tokenHeader = 'Authorization';\n  tokenType = 'Bearer';\n  storageType = 'localStorage';\n  tokenRoot = null;\n  withCredentials = false;\n  providers = {\n    facebook: {\n      name: 'facebook',\n      url: '/auth/facebook',\n      authorizationEndpoint: 'https://www.facebook.com/v2.5/dialog/oauth',\n      redirectUri: window.location.origin + '/',\n      requiredUrlParams: ['display', 'scope'],\n      scope: ['email'],\n      scopeDelimiter: ',',\n      display: 'popup',\n      oauthType: '2.0',\n      popupOptions: { width: 580, height: 400 }\n    },\n    google: {\n      name: 'google',\n      url: '/auth/google',\n      authorizationEndpoint: 'https://accounts.google.com/o/oauth2/auth',\n      redirectUri: window.location.origin,\n      requiredUrlParams: ['scope'],\n      optionalUrlParams: ['display', 'state'],\n      scope: ['profile', 'email'],\n      scopePrefix: 'openid',\n      scopeDelimiter: ' ',\n      display: 'popup',\n      oauthType: '2.0',\n      popupOptions: { width: 452, height: 633 },\n      state: () => encodeURIComponent(Math.random().toString(36).substr(2))\n    },\n    github: {\n      name: 'github',\n      url: '/auth/github',\n      authorizationEndpoint: 'https://github.com/login/oauth/authorize',\n      redirectUri: window.location.origin,\n      optionalUrlParams: ['scope'],\n      scope: ['user:email'],\n      scopeDelimiter: ' ',\n      oauthType: '2.0',\n      popupOptions: { width: 1020, height: 618 }\n    },\n    instagram: {\n      name: 'instagram',\n      url: '/auth/instagram',\n      authorizationEndpoint: 'https://api.instagram.com/oauth/authorize',\n      redirectUri: window.location.origin,\n      requiredUrlParams: ['scope'],\n      scope: ['basic'],\n      scopeDelimiter: '+',\n      oauthType: '2.0'\n    },\n    linkedin: {\n      name: 'linkedin',\n      url: '/auth/linkedin',\n      authorizationEndpoint: 'https://www.linkedin.com/uas/oauth2/authorization',\n      redirectUri: window.location.origin,\n      requiredUrlParams: ['state'],\n      scope: ['r_emailaddress'],\n      scopeDelimiter: ' ',\n      state: 'STATE',\n      oauthType: '2.0',\n      popupOptions: { width: 527, height: 582 }\n    },\n    twitter: {\n      name: 'twitter',\n      url: '/auth/twitter',\n      authorizationEndpoint: 'https://api.twitter.com/oauth/authenticate',\n      redirectUri: window.location.origin,\n      oauthType: '1.0',\n      popupOptions: { width: 495, height: 645 }\n    },\n    twitch: {\n      name: 'twitch',\n      url: '/auth/twitch',\n      authorizationEndpoint: 'https://api.twitch.tv/kraken/oauth2/authorize',\n      redirectUri: window.location.origin,\n      requiredUrlParams: ['scope'],\n      scope: ['user_read'],\n      scopeDelimiter: ' ',\n      display: 'popup',\n      oauthType: '2.0',\n      popupOptions: { width: 500, height: 560 }\n    },\n    live: {\n      name: 'live',\n      url: '/auth/live',\n      authorizationEndpoint: 'https://login.live.com/oauth20_authorize.srf',\n      redirectUri: window.location.origin,\n      requiredUrlParams: ['display', 'scope'],\n      scope: ['wl.emails'],\n      scopeDelimiter: ' ',\n      display: 'popup',\n      oauthType: '2.0',\n      popupOptions: { width: 500, height: 560 }\n    },\n    yahoo: {\n      name: 'yahoo',\n      url: '/auth/yahoo',\n      authorizationEndpoint: 'https://api.login.yahoo.com/oauth2/request_auth',\n      redirectUri: window.location.origin,\n      scope: [],\n      scopeDelimiter: ',',\n      oauthType: '2.0',\n      popupOptions: { width: 559, height: 519 }\n    },\n    bitbucket: {\n      name: 'bitbucket',\n      url: '/auth/bitbucket',\n      authorizationEndpoint: 'https://bitbucket.org/site/oauth2/authorize',\n      redirectUri: window.location.origin + '/',\n      requiredUrlParams: ['scope'],\n      scope: ['email'],\n      scopeDelimiter: ' ',\n      oauthType: '2.0',\n      popupOptions: { width: 1028, height: 529 }\n    },\n    spotify: {\n      name: 'spotify',\n      url: '/auth/spotify',\n      authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n      redirectUri: window.location.origin,\n      optionalUrlParams: ['state'],\n      requiredUrlParams: ['scope'],\n      scope: ['user-read-email'],\n      scopePrefix: '',\n      scopeDelimiter: ',',\n      oauthType: '2.0',\n      popupOptions: { width: 500, height: 530 },\n      state: () => encodeURIComponent(Math.random().toString(36).substr(2))\n    }\n  };\n  httpInterceptor: any = (): boolean => true;\n};\n","import Config from './config';\nimport { IOAuth1Options } from './oauth1';\nimport { IOAuth2Options } from './oauth2';\n\nexport default class AuthProvider {\n  static $inject = ['SatellizerConfig'];\n\n  constructor(private SatellizerConfig: Config) {}\n\n  get baseUrl(): string { return this.SatellizerConfig.baseUrl; }\n  set baseUrl(value) { this.SatellizerConfig.baseUrl = value; }\n\n  get loginUrl(): string { return this.SatellizerConfig.loginUrl; }\n  set loginUrl(value) { this.SatellizerConfig.loginUrl = value; }\n\n  get signupUrl(): string { return this.SatellizerConfig.signupUrl; }\n  set signupUrl(value) { this.SatellizerConfig.signupUrl = value; }\n\n  get unlinkUrl(): string { return this.SatellizerConfig.unlinkUrl; }\n  set unlinkUrl(value) { this.SatellizerConfig.unlinkUrl = value; }\n\n  get tokenRoot(): string { return this.SatellizerConfig.tokenRoot; }\n  set tokenRoot(value) { this.SatellizerConfig.tokenRoot = value; }\n\n  get tokenName(): string { return this.SatellizerConfig.tokenName; }\n  set tokenName(value) { this.SatellizerConfig.tokenName = value; }\n\n  get tokenPrefix(): string { return this.SatellizerConfig.tokenPrefix; }\n  set tokenPrefix(value) { this.SatellizerConfig.tokenPrefix = value; }\n\n  get tokenHeader(): string { return this.SatellizerConfig.tokenHeader; }\n  set tokenHeader(value) { this.SatellizerConfig.tokenHeader = value; }\n\n  get tokenType(): string { return this.SatellizerConfig.tokenType; }\n  set tokenType(value) { this.SatellizerConfig.tokenType = value; }\n\n  get withCredentials(): boolean { return this.SatellizerConfig.withCredentials; }\n  set withCredentials(value) { this.SatellizerConfig.withCredentials = value; }\n\n  get storageType(): string { return this.SatellizerConfig.storageType; }\n  set storageType(value) { this.SatellizerConfig.storageType = value; }\n\n  get httpInterceptor(): boolean { return this.SatellizerConfig.httpInterceptor; }\n  set httpInterceptor(value) {\n    if (typeof value === 'function') {\n      this.SatellizerConfig.httpInterceptor = value;\n    } else {\n      this.SatellizerConfig.httpInterceptor = () => value;\n    }\n  }\n\n  facebook(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.facebook, options);\n  }\n\n  google(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.google, options);\n  }\n\n  github(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.github, options);\n  }\n\n  instagram(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.instagram, options);\n  }\n\n  linkedin(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.linkedin, options);\n  }\n\n  twitter(options: IOAuth1Options): void {\n    angular.extend(this.SatellizerConfig.providers.twitter, options);\n  }\n\n  twitch(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.twitch, options);\n  }\n\n  live(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.live, options);\n  }\n\n  yahoo(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.yahoo, options);\n  }\n\n  bitbucket(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.bitbucket, options);\n  }\n\n  spotify(options: IOAuth2Options): void {\n    angular.extend(this.SatellizerConfig.providers.spotify, options);\n  }\n\n  oauth1(options: IOAuth1Options): void {\n    this.SatellizerConfig.providers[options.name] = angular.extend(options, {\n      oauthType: '1.0'\n    });\n  }\n\n  oauth2(options: IOAuth2Options): void {\n    this.SatellizerConfig.providers[options.name] = angular.extend(options, {\n      oauthType: '2.0'\n    });\n  }\n\n  $get(SatellizerShared, SatellizerLocal, SatellizerOAuth): any {\n    return {\n      login: (user, options) => SatellizerLocal.login(user, options),\n      signup: (user, options) => SatellizerLocal.signup(user, options),\n      logout: () => SatellizerShared.logout(),\n      authenticate: (name, data) => SatellizerOAuth.authenticate(name, data),\n      link: (name, data) => SatellizerOAuth.authenticate(name, data),\n      unlink: (name, options) => SatellizerOAuth.unlink(name, options),\n      isAuthenticated: () => SatellizerShared.isAuthenticated(),\n      getPayload: () => SatellizerShared.getPayload(),\n      getToken: () => SatellizerShared.getToken(),\n      setToken: (token) => SatellizerShared.setToken({ access_token: token }),\n      removeToken: () => SatellizerShared.removeToken(),\n      setStorageType: (type) => SatellizerShared.setStorageType(type)\n    };\n  }\n}\n\nAuthProvider.prototype.$get.$inject = ['SatellizerShared', 'SatellizerLocal', 'SatellizerOAuth'];\n","export function joinUrl (baseUrl, url) {\n  if (/^(?:[a-z]+:)?\\/\\//i.test(url)) {\n    return url;\n  }\n  let joined = [baseUrl, url].join('/');\n  let normalize = function (str) {\n    return str\n      .replace(/[\\/]+/g, '/')\n      .replace(/\\/\\?/g, '?')\n      .replace(/\\/\\#/g, '#')\n      .replace(/\\:\\//g, '://');\n  };\n  return normalize(joined);\n}\n\nexport function getFullUrlPath (location) {\n  const isHttps = location.protocol === 'https:';\n  return location.protocol + '//' + location.hostname +\n    ':' + (location.port || (isHttps ? '443' : '80')) +\n    (/^\\//.test(location.pathname) ? location.pathname : '/' + location.pathname);\n}\n\nexport function parseQueryString (str) {\n  let obj = {};\n  let key;\n  let value;\n  angular.forEach((str || '').split('&'), (keyValue) => {\n    if (keyValue) {\n      value = keyValue.split('=');\n      key = decodeURIComponent(value[0]);\n      obj[key] = angular.isDefined(value[1]) ? decodeURIComponent(value[1]) : true;\n    }\n  });\n  return obj;\n}\n\nexport function decodeBase64 (str) {\n  let buffer;\n  if (typeof module !== 'undefined' && module.exports) {\n    try {\n      buffer = require('buffer').Buffer;\n    } catch (err) {\n      // noop\n    }\n  }\n\n  let fromCharCode = String.fromCharCode;\n\n  let re_btou = new RegExp([\n    '[\\xC0-\\xDF][\\x80-\\xBF]',\n    '[\\xE0-\\xEF][\\x80-\\xBF]{2}',\n    '[\\xF0-\\xF7][\\x80-\\xBF]{3}'\n  ].join('|'), 'g');\n\n  let cb_btou = function (cccc) {\n    switch (cccc.length) {\n      case 4:\n        let cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n          | ((0x3f & cccc.charCodeAt(1)) << 12)\n          | ((0x3f & cccc.charCodeAt(2)) << 6)\n          | (0x3f & cccc.charCodeAt(3));\n        let offset = cp - 0x10000;\n        return (fromCharCode((offset >>> 10) + 0xD800)\n        + fromCharCode((offset & 0x3FF) + 0xDC00));\n      case 3:\n        return fromCharCode(\n          ((0x0f & cccc.charCodeAt(0)) << 12)\n          | ((0x3f & cccc.charCodeAt(1)) << 6)\n          | (0x3f & cccc.charCodeAt(2))\n        );\n      default:\n        return fromCharCode(\n          ((0x1f & cccc.charCodeAt(0)) << 6)\n          | (0x3f & cccc.charCodeAt(1))\n        );\n    }\n  };\n\n  let btou = function (b) {\n    return b.replace(re_btou, cb_btou);\n  };\n\n  let _decode = buffer ? function (a) {\n    return (a.constructor === buffer.constructor\n      ? a : new buffer(a, 'base64')).toString();\n  }\n    : function (a) {\n    return btou(atob(a));\n  };\n\n  return _decode(\n    String(str).replace(/[-_]/g, function (m0) {\n      return m0 === '-' ? '+' : '/';\n    })\n      .replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  );\n}\n","import Config from './config';\nimport Storage from './storage';\nimport { decodeBase64 } from './utils';\n\nclass Shared {\n  static $inject = ['$q', '$window', 'SatellizerConfig', 'SatellizerStorage'];\n  \n  private prefixedTokenName: string;\n\n  constructor(private $q: angular.IQService,\n              private $window: angular.IWindowService,\n              private SatellizerConfig: Config,\n              private SatellizerStorage: Storage) {\n    const { tokenName, tokenPrefix } = this.SatellizerConfig;\n    this.prefixedTokenName = tokenPrefix ? [tokenPrefix, tokenName].join('_') : tokenName;\n  }\n\n  getToken(): string {\n    return this.SatellizerStorage.get(this.prefixedTokenName);\n  }\n\n  getPayload(): any {\n    const token = this.SatellizerStorage.get(this.prefixedTokenName);\n\n    if (token && token.split('.').length === 3) {\n      try {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace('-', '+').replace('_', '/');\n        return JSON.parse(decodeBase64(base64));\n      } catch (e) {\n        // no-op\n      }\n    }\n  }\n\n  setToken(response): void {\n    const tokenRoot = this.SatellizerConfig.tokenRoot;\n    const tokenName = this.SatellizerConfig.tokenName;\n    const accessToken = response && response.access_token;\n\n    let token;\n\n    if (accessToken) {\n      if (angular.isObject(accessToken) && angular.isObject(accessToken.data)) {\n        response = accessToken;\n      } else if (angular.isString(accessToken)) {\n        token = accessToken;\n      }\n    }\n\n    if (!token && response) {\n      const tokenRootData = tokenRoot && tokenRoot.split('.').reduce((o, x) => o[x], response.data);\n      token = tokenRootData ? tokenRootData[tokenName] : response.data && response.data[tokenName];\n    }\n\n    if (token) {\n      this.SatellizerStorage.set(this.prefixedTokenName, token);\n    }\n  }\n\n  removeToken(): void {\n    this.SatellizerStorage.remove(this.prefixedTokenName);\n  }\n\n  isAuthenticated(): boolean {\n    const token = this.SatellizerStorage.get(this.prefixedTokenName);\n\n    if (token) {  // Token is present\n      if (token.split('.').length === 3) {  // Token with a valid JWT format XXX.YYY.ZZZ\n        try { // Could be a valid JWT or an access token with the same format\n          const base64Url = token.split('.')[1];\n          const base64 = base64Url.replace('-', '+').replace('_', '/');\n          const exp = JSON.parse(this.$window.atob(base64)).exp;\n          if (typeof exp === 'number') {  // JWT with an optonal expiration claims\n            return Math.round(new Date().getTime() / 1000) < exp;\n          }\n        } catch (e) {\n          return true;  // Pass: Non-JWT token that looks like JWT\n        }\n      }\n      return true;  // Pass: All other tokens\n    }\n    return false; // Fail: No token at all\n  }\n\n  logout(): angular.IPromise<void> {\n    this.SatellizerStorage.remove(this.prefixedTokenName);\n    return this.$q.when();\n  }\n\n  setStorageType(type): void {\n    this.SatellizerConfig.storageType = type;\n  }\n}\n\nexport default Shared;\n","import { joinUrl } from './utils';\nimport Config from './config';\nimport Shared from './shared';\n\nclass Local {\n  static $inject = ['$http', 'SatellizerConfig', 'SatellizerShared'];\n\n\n  constructor(private $http: angular.IHttpService,\n              private SatellizerConfig: Config,\n              private SatellizerShared: Shared) {}\n\n  login(user: string|Object, options: any = {}): angular.IHttpPromise<any> {\n    options.url = options.url ? options.url : joinUrl(this.SatellizerConfig.baseUrl, this.SatellizerConfig.loginUrl);\n    options.data = user || options.data;\n    options.method = options.method || 'POST';\n    options.withCredentials = options.withCredentials || this.SatellizerConfig.withCredentials;\n\n    return this.$http(options).then((response) => {\n      this.SatellizerShared.setToken(response);\n      return response;\n    });\n  }\n\n  signup(user: string|Object, options: any = {}): angular.IHttpPromise<any> {\n    options.url = options.url ? options.url : joinUrl(this.SatellizerConfig.baseUrl, this.SatellizerConfig.signupUrl);\n    options.data = user || options.data;\n    options.method = options.method || 'POST';\n    options.withCredentials = options.withCredentials || this.SatellizerConfig.withCredentials;\n\n    return this.$http(options);\n  }\n}\n\nexport default Local;\n","import { parseQueryString, getFullUrlPath } from './utils';\n\nexport interface IPopup {\n  open(url: string, name: string, popupOptions: { width: number, height: number }, redirectUri: string): void;\n  stringifyOptions (options: any): string;\n  polling(redirectUri: string): angular.IPromise<any>;\n  eventListener(redirectUri: string): angular.IPromise<any>;\n}\n\nexport default class Popup implements IPopup {\n  static $inject = ['$interval', '$window', '$q'];\n\n  public popup: any;\n  private url: string;\n  private defaults: { redirectUri: string };\n\n  constructor(private $interval: angular.IIntervalService,\n              private $window: angular.IWindowService,\n              private $q: angular.IQService) {\n    this.popup = null;\n    this.defaults = {\n      redirectUri: null\n    };\n  }\n\n  stringifyOptions (options: any): string {\n    const parts = [];\n    angular.forEach(options, function (value, key) {\n      parts.push(key + '=' + value);\n    });\n    return parts.join(',');\n  }\n\n  open(url: string,\n       name: string,\n       popupOptions: { width: number, height: number },\n       redirectUri: string,\n       dontPoll?: boolean): angular.IPromise<any> {\n    const width = popupOptions.width || 500;\n    const height = popupOptions.height || 500;\n\n    const options = this.stringifyOptions({\n      width: width,\n      height: height,\n      top: this.$window.screenY + ((this.$window.outerHeight - height) / 2.5),\n      left: this.$window.screenX + ((this.$window.outerWidth - width) / 2)\n    });\n\n    const popupName = this.$window['cordova'] || this.$window.navigator.userAgent.indexOf('CriOS') > -1 ? '_blank' : name;\n\n    this.popup = this.$window.open(url, popupName, options);\n\n    if (this.popup && this.popup.focus) {\n      this.popup.focus();\n    }\n\n    if (dontPoll) {\n      return;\n    }\n\n    if (this.$window['cordova']) {\n      return this.eventListener(redirectUri);\n    } else {\n      if (url === 'about:blank') {\n        this.popup.location = url;\n      }\n      return this.polling(redirectUri);\n    }\n\n  }\n\n  polling(redirectUri: string): angular.IPromise<any> {\n    return this.$q((resolve, reject) => {\n      const redirectUriParser = document.createElement('a');\n      redirectUriParser.href = redirectUri;\n      const redirectUriPath = getFullUrlPath(redirectUriParser);\n\n      const polling = this.$interval(() => {\n        if (!this.popup || this.popup.closed || this.popup.closed === undefined) {\n          this.$interval.cancel(polling);\n          reject(new Error('The popup window was closed'));\n        }\n\n        try {\n          const popupWindowPath = getFullUrlPath(this.popup.location);\n\n          if (popupWindowPath === redirectUriPath) {\n            if (this.popup.location.search || this.popup.location.hash) {\n              const query = parseQueryString(this.popup.location.search.substring(1).replace(/\\/$/, ''));\n              const hash = parseQueryString(this.popup.location.hash.substring(1).replace(/[\\/$]/, ''));\n              const params = angular.extend({}, query, hash);\n\n              if (params.error) {\n                reject(new Error(params.error));\n              } else {\n                resolve(params);\n              }\n            } else {\n              reject(new Error(\n                'OAuth redirect has occurred but no query or hash parameters were found. ' +\n                'They were either not set during the redirect, or were removed—typically by a ' +\n                'routing library—before Satellizer could read it.'\n              ));\n            }\n\n            this.$interval.cancel(polling);\n            this.popup.close();\n          }\n        } catch (error) {\n          // Ignore DOMException: Blocked a frame with origin from accessing a cross-origin frame.\n          // A hack to get around same-origin security policy errors in IE.\n        }\n      }, 500);\n    });\n  }\n\n  eventListener(redirectUri): angular.IPromise<any> {\n    return this.$q((resolve, reject) => {\n      this.popup.addEventListener('loadstart', (event) => {\n        if (event.url.indexOf(redirectUri) !== 0) {\n          return;\n        }\n\n        const parser = document.createElement('a');\n        parser.href = event.url;\n\n        if (parser.search || parser.hash) {\n          const query = parseQueryString(parser.search.substring(1).replace(/\\/$/, ''));\n          const hash = parseQueryString(parser.hash.substring(1).replace(/[\\/$]/, ''));\n          const params = angular.extend({}, query, hash);\n\n          if (params.error) {\n            reject(new Error(params.error));\n          } else {\n            resolve(params);\n          }\n\n          this.popup.close();\n        }\n      });\n\n      this.popup.addEventListener('loaderror', () => {\n        reject(new Error('Authorization failed'));\n      });\n\n      this.popup.addEventListener('exit', () => {\n        reject(new Error('The popup window was closed'));\n      });\n    });\n  }\n}\n","import { joinUrl } from './utils';\nimport Config from './config';\nimport Popup from './popup';\nimport { IOAuth1Options } from './oauth1';\n\nexport interface IOAuth1 {\n  init(options: any, data: any): angular.IPromise<any>;\n  getRequestToken(): angular.IHttpPromise<any>;\n  openPopup(options: IOAuth1Options, response: angular.IHttpPromiseCallbackArg<any>): angular.IPromise<any>;\n  exchangeForToken(oauthData: any, userData: any): angular.IHttpPromise<any>;\n  buildQueryString(obj: any): string;\n}\n\nexport interface IOAuth1Options {\n  name: string;\n  url: string;\n  authorizationEndpoint: string;\n  redirectUri: string;\n  scope: string[];\n  scopePrefix: string;\n  scopeDelimiter: string;\n  requiredUrlParams: string[];\n  defaultUrlParams: string[];\n  oauthType: string;\n  popupOptions: { width: number, height: number };\n}\n\nexport default class OAuth1 implements IOAuth1 {\n  static $inject = ['$http', '$window', 'SatellizerConfig', 'SatellizerPopup'];\n\n  private defaults: IOAuth1Options;\n\n  constructor(private $http: angular.IHttpService,\n              private $window: angular.IWindowService,\n              private SatellizerConfig: Config,\n              private SatellizerPopup: Popup) {\n\n    this.defaults = {\n      name: null,\n      url: null,\n      authorizationEndpoint: null,\n      scope: null,\n      scopePrefix: null,\n      scopeDelimiter: null,\n      redirectUri: null,\n      requiredUrlParams: null,\n      defaultUrlParams: null,\n      oauthType: '1.0',\n      popupOptions: { width: null, height: null }\n    };\n  };\n\n  init(options: IOAuth1Options, userData: any): angular.IHttpPromise<any> {\n    angular.extend(this.defaults, options);\n    const { name, popupOptions } = options;\n    const { redirectUri } = this.defaults;\n\n    // Should open an empty popup and wait until request token is received\n    if (!this.$window['cordova']) {\n      this.SatellizerPopup.open('about:blank', name, popupOptions, redirectUri, true);\n    }\n\n    return this.getRequestToken().then((response) => {\n      return this.openPopup(options, response).then((popupResponse) => {\n        return this.exchangeForToken(popupResponse, userData);\n      });\n    });\n  }\n\n  openPopup(options: IOAuth1Options, response: angular.IHttpPromiseCallbackArg<any>): angular.IPromise<any> {\n    const url = [options.authorizationEndpoint, this.buildQueryString(response.data)].join('?');\n    const { redirectUri } = this.defaults;\n\n    if (this.$window['cordova']) {\n      return this.SatellizerPopup.open(url, options.name, options.popupOptions, redirectUri);\n    } else {\n      this.SatellizerPopup.popup.location = url;\n      return this.SatellizerPopup.polling(redirectUri);\n    }\n  }\n\n  getRequestToken(): angular.IHttpPromise<any> {\n    const url = this.SatellizerConfig.baseUrl ? joinUrl(this.SatellizerConfig.baseUrl, this.defaults.url) : this.defaults.url;\n    return this.$http.post(url, this.defaults);\n  }\n\n  exchangeForToken(oauthData, userData): angular.IHttpPromise<any> {\n    const payload = angular.extend({}, userData, oauthData);\n    const exchangeForTokenUrl = this.SatellizerConfig.baseUrl ? joinUrl(this.SatellizerConfig.baseUrl, this.defaults.url) : this.defaults.url;\n    return this.$http.post(exchangeForTokenUrl, payload, { withCredentials: this.SatellizerConfig.withCredentials });\n  }\n\n  buildQueryString(obj): string {\n    const str = [];\n    angular.forEach(obj, function (value, key) {\n      str.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    });\n    return str.join('&');\n  }\n}\n","import { joinUrl } from './utils';\nimport Config from './config';\nimport Popup from './popup';\nimport Storage from './storage';\n\nexport interface IOAuth2Options {\n  name: string;\n  url: string;\n  clientId: string;\n  authorizationEndpoint: string;\n  redirectUri: string;\n  scope: string[];\n  scopePrefix: string;\n  scopeDelimiter: string;\n  state?: string|(() => string);\n  requiredUrlParams: string[];\n  defaultUrlParams: string[];\n  responseType: string;\n  responseParams: {\n    code: string,\n    clientId: string,\n    redirectUri: string\n  };\n  oauthType: string;\n  popupOptions: { width: number, height: number };\n}\n\nexport default class OAuth2 {\n  static $inject = ['$http', '$window', '$timeout', '$q', 'SatellizerConfig', 'SatellizerPopup', 'SatellizerStorage'];\n\n  static camelCase(name): string {\n    return name.replace(/([\\:\\-\\_]+(.))/g, (_, separator, letter, offset) => {\n      return offset ? letter.toUpperCase() : letter;\n    });\n  }\n\n  public defaults: IOAuth2Options;\n\n  constructor(private $http: angular.IHttpService,\n              private $window: angular.IWindowService,\n              private $timeout: angular.ITimeoutService,\n              private $q: angular.IQService,\n              private SatellizerConfig: Config,\n              private SatellizerPopup: Popup,\n              private SatellizerStorage: Storage) {\n\n    this.defaults = {\n      name: null,\n      url: null,\n      clientId: null,\n      authorizationEndpoint: null,\n      redirectUri: null,\n      scope: null,\n      scopePrefix: null,\n      scopeDelimiter: null,\n      state: null,\n      requiredUrlParams: null,\n      defaultUrlParams: ['response_type', 'client_id', 'redirect_uri'],\n      responseType: 'code',\n      responseParams: {\n        code: 'code',\n        clientId: 'clientId',\n        redirectUri: 'redirectUri'\n      },\n      oauthType: '2.0',\n      popupOptions: { width: null, height: null }\n    };\n  }\n\n  init(options: IOAuth2Options, userData: any): angular.IPromise<any> {\n    return this.$q((resolve, reject) => {\n      angular.extend(this.defaults, options);\n\n      const stateName = this.defaults.name + '_state';\n      const { name, state, popupOptions, redirectUri, responseType } = this.defaults;\n\n      if (typeof state === 'function') {\n        this.SatellizerStorage.set(stateName, state());\n      } else if (typeof state === 'string') {\n        this.SatellizerStorage.set(stateName, state);\n      }\n\n      const url = [this.defaults.authorizationEndpoint, this.buildQueryString()].join('?');\n\n      this.SatellizerPopup.open(url, name, popupOptions, redirectUri).then((oauth: any): void|angular.IPromise<any>|angular.IHttpPromise<any> => {\n        if (responseType === 'token' || !this.defaults.url) {\n          return resolve(oauth);\n        }\n\n        if (oauth.state && oauth.state !== this.SatellizerStorage.get(stateName)) {\n          return reject(new Error(\n            'The value returned in the state parameter does not match the state value from your original ' +\n            'authorization code request.'\n          ));\n        }\n\n        resolve(this.exchangeForToken(oauth, userData));\n      }).catch(error => reject(error));\n    });\n  }\n\n  exchangeForToken(oauthData: { code?, state? }, userData: any): angular.IHttpPromise<any> {\n    const payload = angular.extend({}, userData);\n\n    angular.forEach(this.defaults.responseParams, (value, key) => {\n      switch (key) {\n        case 'code':\n          payload[value] = oauthData.code;\n          break;\n        case 'clientId':\n          payload[value] = this.defaults.clientId;\n          break;\n        case 'redirectUri':\n          payload[value] = this.defaults.redirectUri;\n          break;\n        default:\n          payload[value] = oauthData[key];\n      }\n    });\n\n    if (oauthData.state) {\n      payload.state = oauthData.state;\n    }\n\n    let exchangeForTokenUrl = this.SatellizerConfig.baseUrl ?\n      joinUrl(this.SatellizerConfig.baseUrl, this.defaults.url) :\n      this.defaults.url;\n\n    return this.$http.post(exchangeForTokenUrl, payload, { withCredentials: this.SatellizerConfig.withCredentials });\n  }\n\n  buildQueryString(): string {\n    const keyValuePairs = [];\n    const urlParamsCategories = ['defaultUrlParams', 'requiredUrlParams', 'optionalUrlParams'];\n\n    angular.forEach(urlParamsCategories, (paramsCategory) => {\n      angular.forEach(this.defaults[paramsCategory], (paramName) => {\n        const camelizedName = OAuth2.camelCase(paramName);\n        let paramValue = angular.isFunction(this.defaults[paramName]) ? this.defaults[paramName]() : this.defaults[camelizedName];\n\n        if (paramName === 'redirect_uri' && !paramValue) {\n          return;\n        }\n        if (paramName === 'state') {\n          const stateName = this.defaults.name + '_state';\n          paramValue = encodeURIComponent(this.SatellizerStorage.get(stateName));\n        }\n        if (paramName === 'scope' && Array.isArray(paramValue)) {\n          paramValue = paramValue.join(this.defaults.scopeDelimiter);\n          if (this.defaults.scopePrefix) {\n            paramValue = [this.defaults.scopePrefix, paramValue].join(this.defaults.scopeDelimiter);\n          }\n        }\n\n        keyValuePairs.push([paramName, paramValue]);\n      });\n    });\n\n    return keyValuePairs.map(pair => pair.join('=')).join('&');\n  }\n}\n","import { joinUrl } from './utils';\nimport Config from './config';\nimport Popup from './popup';\nimport Storage from './storage';\nimport Shared from './shared';\nimport OAuth1 from './oauth1';\nimport OAuth2 from './oauth2';\n\nexport default class OAuth {\n  static $inject = [\n    '$http',\n    '$window',\n    '$timeout',\n    '$q',\n    'SatellizerConfig',\n    'SatellizerPopup',\n    'SatellizerStorage',\n    'SatellizerShared',\n    'SatellizerOAuth1',\n    'SatellizerOAuth2'\n  ];\n\n  constructor(private $http: angular.IHttpService,\n              private $window: angular.IWindowService,\n              private $timeout: angular.ITimeoutService,\n              private $q: angular.IQService,\n              private SatellizerConfig: Config,\n              private SatellizerPopup: Popup,\n              private SatellizerStorage: Storage,\n              private SatellizerShared: Shared,\n              private SatellizerOAuth1: OAuth1,\n              private SatellizerOAuth2: OAuth2) {}\n\n  authenticate(name: string, userData?: any): angular.IPromise<any> {\n    return this.$q((resolve, reject) => {\n      const provider = this.SatellizerConfig.providers[name];\n\n      let oauth = null;\n\n      switch (provider.oauthType) {\n        case '1.0':\n          oauth = new OAuth1(this.$http, this.$window, this.SatellizerConfig, this.SatellizerPopup);\n          break;\n        case '2.0':\n          oauth = new OAuth2(this.$http, this.$window, this.$timeout, this.$q, this.SatellizerConfig, this.SatellizerPopup, this.SatellizerStorage);\n          break;\n        default:\n          return reject(new Error('Invalid OAuth Type'));\n      }\n\n      return oauth.init(provider, userData).then((response) => {\n        if (provider.url) {\n          this.SatellizerShared.setToken(response);\n        }\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  unlink(provider: string, httpOptions: any = {}): angular.IHttpPromise<any> {\n    httpOptions.url = httpOptions.url ? httpOptions.url : joinUrl(this.SatellizerConfig.baseUrl, this.SatellizerConfig.unlinkUrl);\n    httpOptions.data = { provider: provider } || httpOptions.data;\n    httpOptions.method = httpOptions.method || 'POST';\n    httpOptions.withCredentials = httpOptions.withCredentials || this.SatellizerConfig.withCredentials;\n\n    return this.$http(httpOptions);\n  }\n}\n","import Config from './config';\n\nexport default class Storage {\n  static $inject = ['$window', 'SatellizerConfig'];\n\n  private memoryStore: any;\n  private storageType: string;\n\n  constructor(private $window: angular.IHttpService,\n              private SatellizerConfig: Config) {\n    this.memoryStore = {};\n  }\n\n  isStorageAvailable (storageType: string): boolean {\n    var key = Math.random().toString(36)\n\n    try {\n      this.$window[storageType].setItem(key, '');\n      this.$window[storageType].removeItem(key);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  get(key: string): string {\n    if (this.isStorageAvailable(this.SatellizerConfig.storageType)) {\n      return this.$window[this.SatellizerConfig.storageType].getItem(key);\n    } else {\n      return this.memoryStore[key];\n    }\n  }\n\n  set(key: string, value: string): void {\n    if (this.isStorageAvailable(this.SatellizerConfig.storageType)) {\n      this.$window[this.SatellizerConfig.storageType].setItem(key, value);\n    } else {\n      this.memoryStore[key] = value;\n    }\n  }\n\n  remove(key: string): void {\n    if (this.isStorageAvailable(this.SatellizerConfig.storageType)) {\n      this.$window[this.SatellizerConfig.storageType].removeItem(key);\n    } else {\n      delete this.memoryStore[key];\n    }\n  }\n}\n","import Config from './config';\nimport Shared from './shared';\nimport Storage from './storage';\n\nexport default class Interceptor implements angular.IHttpInterceptor {\n\n  static $inject = ['SatellizerConfig', 'SatellizerShared', 'SatellizerStorage'];\n\n  static Factory(SatellizerConfig: Config, SatellizerShared: Shared, SatellizerStorage: Storage): Interceptor {\n    return new Interceptor(SatellizerConfig, SatellizerShared, SatellizerStorage);\n  }\n\n  constructor(private SatellizerConfig: Config,\n              private SatellizerShared: Shared,\n              private SatellizerStorage: Storage) {\n  }\n\n  request = (config: angular.IRequestConfig): angular.IRequestConfig => {\n    if (config['skipAuthorization']) {\n      return config;\n    }\n\n    if (this.SatellizerShared.isAuthenticated() && this.SatellizerConfig.httpInterceptor()) {\n      const tokenName = this.SatellizerConfig.tokenPrefix ?\n        [this.SatellizerConfig.tokenPrefix, this.SatellizerConfig.tokenName].join('_') : this.SatellizerConfig.tokenName;\n      let token = this.SatellizerStorage.get(tokenName);\n\n      if (this.SatellizerConfig.tokenHeader && this.SatellizerConfig.tokenType) {\n        token = this.SatellizerConfig.tokenType + ' ' + token;\n      }\n\n      config.headers[this.SatellizerConfig.tokenHeader] = token;\n    }\n\n    return config;\n  };\n}\n\nInterceptor.Factory.$inject = ['SatellizerConfig', 'SatellizerShared', 'SatellizerStorage'];","import Interceptor from './interceptor';\n\nexport default class HttpProviderConfig {\n  static $inject = ['$httpProvider'];\n\n  constructor(private $httpProvider: angular.IHttpProvider) {\n    $httpProvider.interceptors.push(Interceptor.Factory);\n  }\n}\n","import Config from './config';\nimport AuthProvider from './authProvider';\nimport Shared from './shared';\nimport Local from './local';\nimport Popup from './popup';\nimport OAuth from './oauth';\nimport OAuth2 from './oauth2';\nimport OAuth1 from './oauth1';\nimport Storage from './storage';\nimport Interceptor from './interceptor';\nimport HttpProviderConfig from './httpProviderConfig';\n\nangular.module('satellizer', [])\n  .provider('$auth', ['SatellizerConfig', (SatellizerConfig) => new AuthProvider(SatellizerConfig)])\n  .constant('SatellizerConfig', Config.getConstant)\n  .service('SatellizerShared', Shared)\n  .service('SatellizerLocal', Local)\n  .service('SatellizerPopup', Popup)\n  .service('SatellizerOAuth', OAuth)\n  .service('SatellizerOAuth2', OAuth2)\n  .service('SatellizerOAuth1', OAuth1)\n  .service('SatellizerStorage', Storage)\n  .service('SatellizerInterceptor', Interceptor)\n  .config(['$httpProvider', ($httpProvider) => new HttpProviderConfig($httpProvider)]);\n\nexport default 'satellizer';\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAe;IAAA;QAKb,YAAO,GAAG,GAAG,CAAC;QACd,aAAQ,GAAG,aAAa,CAAC;QACzB,cAAS,GAAG,cAAc,CAAC;QAC3B,cAAS,GAAG,eAAe,CAAC;QAC5B,cAAS,GAAG,OAAO,CAAC;QACpB,gBAAW,GAAG,YAAY,CAAC;QAC3B,gBAAW,GAAG,eAAe,CAAC;QAC9B,cAAS,GAAG,QAAQ,CAAC;QACrB,gBAAW,GAAG,cAAc,CAAC;QAC7B,cAAS,GAAG,IAAI,CAAC;QACjB,oBAAe,GAAG,KAAK,CAAC;QACxB,cAAS,GAAG;YACV,QAAQ,EAAE;gBACR,IAAI,EAAE,UAAU;gBAChB,GAAG,EAAE,gBAAgB;gBACrB,qBAAqB,EAAE,4CAA4C;gBACnE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG;gBACzC,iBAAiB,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;gBACvC,KAAK,EAAE,CAAC,OAAO,CAAC;gBAChB,cAAc,EAAE,GAAG;gBACnB,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,MAAM,EAAE;gBACN,IAAI,EAAE,QAAQ;gBACd,GAAG,EAAE,cAAc;gBACnB,qBAAqB,EAAE,2CAA2C;gBAClE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,iBAAiB,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;gBACvC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;gBAC3B,WAAW,EAAE,QAAQ;gBACrB,cAAc,EAAE,GAAG;gBACnB,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;gBACzC,KAAK,EAAE,cAAM,OAAA,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAA;aACtE;YACD,MAAM,EAAE;gBACN,IAAI,EAAE,QAAQ;gBACd,GAAG,EAAE,cAAc;gBACnB,qBAAqB,EAAE,0CAA0C;gBACjE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,YAAY,CAAC;gBACrB,cAAc,EAAE,GAAG;gBACnB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE;aAC3C;YACD,SAAS,EAAE;gBACT,IAAI,EAAE,WAAW;gBACjB,GAAG,EAAE,iBAAiB;gBACtB,qBAAqB,EAAE,2CAA2C;gBAClE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,OAAO,CAAC;gBAChB,cAAc,EAAE,GAAG;gBACnB,SAAS,EAAE,KAAK;aACjB;YACD,QAAQ,EAAE;gBACR,IAAI,EAAE,UAAU;gBAChB,GAAG,EAAE,gBAAgB;gBACrB,qBAAqB,EAAE,mDAAmD;gBAC1E,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,gBAAgB,CAAC;gBACzB,cAAc,EAAE,GAAG;gBACnB,KAAK,EAAE,OAAO;gBACd,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,OAAO,EAAE;gBACP,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE,eAAe;gBACpB,qBAAqB,EAAE,4CAA4C;gBACnE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,MAAM,EAAE;gBACN,IAAI,EAAE,QAAQ;gBACd,GAAG,EAAE,cAAc;gBACnB,qBAAqB,EAAE,+CAA+C;gBACtE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,WAAW,CAAC;gBACpB,cAAc,EAAE,GAAG;gBACnB,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,IAAI,EAAE;gBACJ,IAAI,EAAE,MAAM;gBACZ,GAAG,EAAE,YAAY;gBACjB,qBAAqB,EAAE,8CAA8C;gBACrE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;gBACvC,KAAK,EAAE,CAAC,WAAW,CAAC;gBACpB,cAAc,EAAE,GAAG;gBACnB,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,KAAK,EAAE;gBACL,IAAI,EAAE,OAAO;gBACb,GAAG,EAAE,aAAa;gBAClB,qBAAqB,EAAE,iDAAiD;gBACxE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,KAAK,EAAE,EAAE;gBACT,cAAc,EAAE,GAAG;gBACnB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;aAC1C;YACD,SAAS,EAAE;gBACT,IAAI,EAAE,WAAW;gBACjB,GAAG,EAAE,iBAAiB;gBACtB,qBAAqB,EAAE,6CAA6C;gBACpE,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG;gBACzC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,OAAO,CAAC;gBAChB,cAAc,EAAE,GAAG;gBACnB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE;aAC3C;YACD,OAAO,EAAE;gBACP,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE,eAAe;gBACpB,qBAAqB,EAAE,wCAAwC;gBAC/D,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;gBACnC,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,iBAAiB,EAAE,CAAC,OAAO,CAAC;gBAC5B,KAAK,EAAE,CAAC,iBAAiB,CAAC;gBAC1B,WAAW,EAAE,EAAE;gBACf,cAAc,EAAE,GAAG;gBACnB,SAAS,EAAE,KAAK;gBAChB,YAAY,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;gBACzC,KAAK,EAAE,cAAM,OAAA,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAA;aACtE;SACF,CAAC;QACF,oBAAe,GAAQ,cAAe,OAAA,IAAI,GAAA,CAAC;KAC5C;IAjJC,sBAAW,qBAAW;aAAtB;YACE,OAAO,IAAI,MAAM,EAAE,CAAC;SACrB;;;OAAA;IA+IH,aAAC;CAAA,IAAA,AAAA,AAAC,AAEF;;AChJe;IAGb,sBAAoB,gBAAwB;QAAxB,qBAAgB,GAAhB,gBAAgB,CAAQ;KAAI;IAEhD,sBAAI,iCAAO;aAAX,cAAwB,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAE;aAC/D,UAAY,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,KAAK,CAAC,EAAE;;;OADE;IAG/D,sBAAI,kCAAQ;aAAZ,cAAyB,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;aACjE,UAAa,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,QAAQ,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGjE,sBAAI,mCAAS;aAAb,cAA0B,OAAO,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;aACnE,UAAc,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGnE,sBAAI,mCAAS;aAAb,cAA0B,OAAO,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;aACnE,UAAc,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGnE,sBAAI,mCAAS;aAAb,cAA0B,OAAO,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;aACnE,UAAc,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGnE,sBAAI,mCAAS;aAAb,cAA0B,OAAO,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;aACnE,UAAc,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGnE,sBAAI,qCAAW;aAAf,cAA4B,OAAO,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;aACvE,UAAgB,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGvE,sBAAI,qCAAW;aAAf,cAA4B,OAAO,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;aACvE,UAAgB,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGvE,sBAAI,mCAAS;aAAb,cAA0B,OAAO,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;aACnE,UAAc,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGnE,sBAAI,yCAAe;aAAnB,cAAiC,OAAO,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE;aAChF,UAAoB,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,GAAG,KAAK,CAAC,EAAE;;;OADG;IAGhF,sBAAI,qCAAW;aAAf,cAA4B,OAAO,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;aACvE,UAAgB,KAAK,IAAI,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,KAAK,CAAC,EAAE;;;OADE;IAGvE,sBAAI,yCAAe;aAAnB,cAAiC,OAAO,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE;aAChF,UAAoB,KAAK;YACvB,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;gBAC/B,IAAI,CAAC,gBAAgB,CAAC,eAAe,GAAG,KAAK,CAAC;aAC/C;iBAAM;gBACL,IAAI,CAAC,gBAAgB,CAAC,eAAe,GAAG,cAAM,OAAA,KAAK,GAAA,CAAC;aACrD;SACF;;;OAP+E;IAShF,+BAAQ,GAAR,UAAS,OAAuB;QAC9B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;KACnE;IAED,6BAAM,GAAN,UAAO,OAAuB;QAC5B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KACjE;IAED,6BAAM,GAAN,UAAO,OAAuB;QAC5B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KACjE;IAED,gCAAS,GAAT,UAAU,OAAuB;QAC/B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;KACpE;IAED,+BAAQ,GAAR,UAAS,OAAuB;QAC9B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;KACnE;IAED,8BAAO,GAAP,UAAQ,OAAuB;QAC7B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KAClE;IAED,6BAAM,GAAN,UAAO,OAAuB;QAC5B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KACjE;IAED,2BAAI,GAAJ,UAAK,OAAuB;QAC1B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KAC/D;IAED,4BAAK,GAAL,UAAM,OAAuB;QAC3B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;KAChE;IAED,gCAAS,GAAT,UAAU,OAAuB;QAC/B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;KACpE;IAED,8BAAO,GAAP,UAAQ,OAAuB;QAC7B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KAClE;IAED,6BAAM,GAAN,UAAO,OAAuB;QAC5B,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE;YACtE,SAAS,EAAE,KAAK;SACjB,CAAC,CAAC;KACJ;IAED,6BAAM,GAAN,UAAO,OAAuB;QAC5B,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE;YACtE,SAAS,EAAE,KAAK;SACjB,CAAC,CAAC;KACJ;IAED,2BAAI,GAAJ,UAAK,gBAAgB,EAAE,eAAe,EAAE,eAAe;QACrD,OAAO;YACL,KAAK,EAAE,UAAC,IAAI,EAAE,OAAO,IAAK,OAAA,eAAe,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,GAAA;YAC9D,MAAM,EAAE,UAAC,IAAI,EAAE,OAAO,IAAK,OAAA,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAA;YAChE,MAAM,EAAE,cAAM,OAAA,gBAAgB,CAAC,MAAM,EAAE,GAAA;YACvC,YAAY,EAAE,UAAC,IAAI,EAAE,IAAI,IAAK,OAAA,eAAe,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,GAAA;YACtE,IAAI,EAAE,UAAC,IAAI,EAAE,IAAI,IAAK,OAAA,eAAe,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,GAAA;YAC9D,MAAM,EAAE,UAAC,IAAI,EAAE,OAAO,IAAK,OAAA,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAA;YAChE,eAAe,EAAE,cAAM,OAAA,gBAAgB,CAAC,eAAe,EAAE,GAAA;YACzD,UAAU,EAAE,cAAM,OAAA,gBAAgB,CAAC,UAAU,EAAE,GAAA;YAC/C,QAAQ,EAAE,cAAM,OAAA,gBAAgB,CAAC,QAAQ,EAAE,GAAA;YAC3C,QAAQ,EAAE,UAAC,KAAK,IAAK,OAAA,gBAAgB,CAAC,QAAQ,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,GAAA;YACvE,WAAW,EAAE,cAAM,OAAA,gBAAgB,CAAC,WAAW,EAAE,GAAA;YACjD,cAAc,EAAE,UAAC,IAAI,IAAK,OAAA,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,GAAA;SAChE,CAAC;KACH;IArHM,oBAAO,GAAG,CAAC,kBAAkB,CAAC,CAAC;IAsHxC,mBAAC;CAAA,IAAA;AAED,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,iBAAiB,CAAC,CAAC,AAEjG;;iBC/HyB,OAAO,EAAE,GAAG;IACnC,IAAI,oBAAoB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;QAClC,OAAO,GAAG,CAAC;KACZ;IACD,IAAI,MAAM,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACtC,IAAI,SAAS,GAAG,UAAU,GAAG;QAC3B,OAAO,GAAG;aACP,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC;aACtB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC;aACrB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC;aACrB,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;KAC5B,CAAC;IACF,OAAO,SAAS,CAAC,MAAM,CAAC,CAAC;CAC1B;AAED,wBAAgC,QAAQ;IACtC,IAAM,OAAO,GAAG,QAAQ,CAAC,QAAQ,KAAK,QAAQ,CAAC;IAC/C,OAAO,QAAQ,CAAC,QAAQ,GAAG,IAAI,GAAG,QAAQ,CAAC,QAAQ;QACjD,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;QACjD,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,QAAQ,GAAG,GAAG,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;CACjF;AAED,0BAAkC,GAAG;IACnC,IAAI,GAAG,GAAG,EAAE,CAAC;IACb,IAAI,GAAG,CAAC;IACR,IAAI,KAAK,CAAC;IACV,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,UAAC,QAAQ;QAC/C,IAAI,QAAQ,EAAE;YACZ,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAC9E;KACF,CAAC,CAAC;IACH,OAAO,GAAG,CAAC;CACZ;AAED,sBAA8B,GAAG;IAC/B,IAAI,MAAM,CAAC;IACX,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,OAAO,EAAE;QACnD,IAAI;YACF,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;SAClC;QAAA,OAAO,GAAG,EAAE;SAEb;KACF;IAED,IAAI,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;IAEvC,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC;QACvB,wBAAwB;QACxB,2BAA2B;QAC3B,2BAA2B;KAC5B,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAElB,IAAI,OAAO,GAAG,UAAU,IAAI;QAC1B,QAAQ,IAAI,CAAC,MAAM;YACjB,KAAK,CAAC;gBACJ,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;sBACxC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;sBACnC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;sBAClC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChC,IAAI,MAAM,GAAG,EAAE,GAAG,OAAO,CAAC;gBAC1B,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,KAAK,EAAE,CAAC,GAAG,MAAM,CAAC;sBAC5C,YAAY,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YAC7C,KAAK,CAAC;gBACJ,OAAO,YAAY,CACjB,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;sBACjC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;sBAClC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAC9B,CAAC;YACJ;gBACE,OAAO,YAAY,CACjB,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;sBAChC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAC9B,CAAC;SACL;KACF,CAAC;IAEF,IAAI,IAAI,GAAG,UAAU,CAAC;QACpB,OAAO,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KACpC,CAAC;IAEF,IAAI,OAAO,GAAG,MAAM,GAAG,UAAU,CAAC;QAChC,OAAO,CAAC,CAAC,CAAC,WAAW,KAAK,MAAM,CAAC,WAAW;cACxC,CAAC,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;KAC7C;UACG,UAAU,CAAC;YACb,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACtB,CAAC;IAEF,OAAO,OAAO,CACZ,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,UAAU,EAAE;QACvC,OAAO,EAAE,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;KAC/B,CAAC;SACC,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC,CACpC,CAAC;CACH;;AC5FD;IAKE,gBAAoB,EAAqB,EACrB,OAA+B,EAC/B,gBAAwB,EACxB,iBAA0B;QAH1B,OAAE,GAAF,EAAE,CAAmB;QACrB,YAAO,GAAP,OAAO,CAAwB;QAC/B,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,sBAAiB,GAAjB,iBAAiB,CAAS;QAC5C,IAAA,0BAAwD,EAAhD,wBAAS,EAAE,4BAAW,CAA2B;QACzD,IAAI,CAAC,iBAAiB,GAAG,WAAW,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;KACvF;IAED,yBAAQ,GAAR;QACE,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;KAC3D;IAED,2BAAU,GAAV;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEjE,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YAC1C,IAAI;gBACF,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtC,IAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBAC7D,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;aACxC;YAAA,OAAO,CAAC,EAAE;aAEX;SACF;KACF;IAED,yBAAQ,GAAR,UAAS,QAAQ;QACf,IAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAClD,IAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAClD,IAAM,WAAW,GAAG,QAAQ,IAAI,QAAQ,CAAC,YAAY,CAAC;QAEtD,IAAI,KAAK,CAAC;QAEV,IAAI,WAAW,EAAE;YACf,IAAI,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;gBACvE,QAAQ,GAAG,WAAW,CAAC;aACxB;iBAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;gBACxC,KAAK,GAAG,WAAW,CAAC;aACrB;SACF;QAED,IAAI,CAAC,KAAK,IAAI,QAAQ,EAAE;YACtB,IAAM,aAAa,GAAG,SAAS,IAAI,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,CAAC,CAAC,GAAA,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC9F,KAAK,GAAG,aAAa,GAAG,aAAa,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC9F;QAED,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;SAC3D;KACF;IAED,4BAAW,GAAX;QACE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;KACvD;IAED,gCAAe,GAAf;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEjE,IAAI,KAAK,EAAE;YACT,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;gBACjC,IAAI;oBACF,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACtC,IAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;oBAC7D,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;oBACtD,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;wBAC3B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;qBACtD;iBACD;gBAAA,OAAO,CAAC,EAAE;oBACV,OAAO,IAAI,CAAC;iBACb;aACF;YACD,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;KACd;IAED,uBAAM,GAAN;QACE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACtD,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;KACvB;IAED,+BAAc,GAAd,UAAe,IAAI;QACjB,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,IAAI,CAAC;KAC1C;IAvFM,cAAO,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,CAAC;IAwF9E,aAAC;CAAA,IAAA,AAED;;AC3FA;IAIE,eAAoB,KAA2B,EAC3B,gBAAwB,EACxB,gBAAwB;QAFxB,UAAK,GAAL,KAAK,CAAsB;QAC3B,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,qBAAgB,GAAhB,gBAAgB,CAAQ;KAAI;IAEhD,qBAAK,GAAL,UAAM,IAAmB,EAAE,OAAiB;QAA5C,iBAUC;QAV0B,0BAAA,YAAiB;QAC1C,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QACjH,OAAO,CAAC,IAAI,GAAG,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC;QACpC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC;QAC1C,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC;QAE3F,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACvC,KAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACzC,OAAO,QAAQ,CAAC;SACjB,CAAC,CAAC;KACJ;IAED,sBAAM,GAAN,UAAO,IAAmB,EAAE,OAAiB;QAAjB,0BAAA,YAAiB;QAC3C,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;QAClH,OAAO,CAAC,IAAI,GAAG,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC;QACpC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC;QAC1C,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC;QAE3F,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;KAC5B;IA1BM,aAAO,GAAG,CAAC,OAAO,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;IA2BrE,YAAC;CAAA,IAAA,AAED;;ACzBe;IAOb,eAAoB,SAAmC,EACnC,OAA+B,EAC/B,EAAqB;QAFrB,cAAS,GAAT,SAAS,CAA0B;QACnC,YAAO,GAAP,OAAO,CAAwB;QAC/B,OAAE,GAAF,EAAE,CAAmB;QACvC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG;YACd,WAAW,EAAE,IAAI;SAClB,CAAC;KACH;IAED,gCAAgB,GAAhB,UAAkB,OAAY;QAC5B,IAAM,KAAK,GAAG,EAAE,CAAC;QACjB,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE,GAAG;YAC3C,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC;SAC/B,CAAC,CAAC;QACH,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACxB;IAED,oBAAI,GAAJ,UAAK,GAAW,EACX,IAAY,EACZ,YAA+C,EAC/C,WAAmB,EACnB,QAAkB;QACrB,IAAM,KAAK,GAAG,YAAY,CAAC,KAAK,IAAI,GAAG,CAAC;QACxC,IAAM,MAAM,GAAG,YAAY,CAAC,MAAM,IAAI,GAAG,CAAC;QAE1C,IAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC;YACpC,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,MAAM;YACd,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,GAAG,GAAG,CAAC;YACvE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;SACrE,CAAC,CAAC;QAEH,IAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC;QAEtH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAExD,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;YAClC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;SACpB;QAED,IAAI,QAAQ,EAAE;YACZ,OAAO;SACR;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC3B,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;SACxC;aAAM;YACL,IAAI,GAAG,KAAK,aAAa,EAAE;gBACzB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;aAC3B;YACD,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SAClC;KAEF;IAED,uBAAO,GAAP,UAAQ,WAAmB;QAA3B,iBA2CC;QA1CC,OAAO,IAAI,CAAC,EAAE,CAAC,UAAC,OAAO,EAAE,MAAM;YAC7B,IAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YACtD,iBAAiB,CAAC,IAAI,GAAG,WAAW,CAAC;YACrC,IAAM,eAAe,GAAG,cAAc,CAAC,iBAAiB,CAAC,CAAC;YAE1D,IAAM,OAAO,GAAG,KAAI,CAAC,SAAS,CAAC;gBAC7B,IAAI,CAAC,KAAI,CAAC,KAAK,IAAI,KAAI,CAAC,KAAK,CAAC,MAAM,IAAI,KAAI,CAAC,KAAK,CAAC,MAAM,KAAK,SAAS,EAAE;oBACvE,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBAC/B,MAAM,CAAC,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC,CAAC;iBAClD;gBAED,IAAI;oBACF,IAAM,eAAe,GAAG,cAAc,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;oBAE5D,IAAI,eAAe,KAAK,eAAe,EAAE;wBACvC,IAAI,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,IAAI,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE;4BAC1D,IAAM,KAAK,GAAG,gBAAgB,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;4BAC3F,IAAM,IAAI,GAAG,gBAAgB,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;4BAC1F,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;4BAE/C,IAAI,MAAM,CAAC,KAAK,EAAE;gCAChB,MAAM,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;6BACjC;iCAAM;gCACL,OAAO,CAAC,MAAM,CAAC,CAAC;6BACjB;yBACF;6BAAM;4BACL,MAAM,CAAC,IAAI,KAAK,CACd,0EAA0E;gCAC1E,+EAA+E;gCAC/E,kDAAkD,CACnD,CAAC,CAAC;yBACJ;wBAED,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;wBAC/B,KAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;qBACpB;iBACD;gBAAA,OAAO,KAAK,EAAE;iBAGf;aACF,EAAE,GAAG,CAAC,CAAC;SACT,CAAC,CAAC;KACJ;IAED,6BAAa,GAAb,UAAc,WAAW;QAAzB,iBAiCC;QAhCC,OAAO,IAAI,CAAC,EAAE,CAAC,UAAC,OAAO,EAAE,MAAM;YAC7B,KAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAC,KAAK;gBAC7C,IAAI,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;oBACxC,OAAO;iBACR;gBAED,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBAC3C,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;gBAExB,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE;oBAChC,IAAM,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;oBAC9E,IAAM,IAAI,GAAG,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;oBAC7E,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;oBAE/C,IAAI,MAAM,CAAC,KAAK,EAAE;wBAChB,MAAM,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;qBACjC;yBAAM;wBACL,OAAO,CAAC,MAAM,CAAC,CAAC;qBACjB;oBAED,KAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;iBACpB;aACF,CAAC,CAAC;YAEH,KAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE;gBACvC,MAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC;aAC3C,CAAC,CAAC;YAEH,KAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE;gBAClC,MAAM,CAAC,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC,CAAC;aAClD,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ;IA3IM,aAAO,GAAG,CAAC,WAAW,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;IA4IlD,YAAC;CAAA,IAAA,AAED;;AC7He;IAKb,gBAAoB,KAA2B,EAC3B,OAA+B,EAC/B,gBAAwB,EACxB,eAAsB;QAHtB,UAAK,GAAL,KAAK,CAAsB;QAC3B,YAAO,GAAP,OAAO,CAAwB;QAC/B,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,oBAAe,GAAf,eAAe,CAAO;QAExC,IAAI,CAAC,QAAQ,GAAG;YACd,IAAI,EAAE,IAAI;YACV,GAAG,EAAE,IAAI;YACT,qBAAqB,EAAE,IAAI;YAC3B,KAAK,EAAE,IAAI;YACX,WAAW,EAAE,IAAI;YACjB,cAAc,EAAE,IAAI;YACpB,WAAW,EAAE,IAAI;YACjB,iBAAiB,EAAE,IAAI;YACvB,gBAAgB,EAAE,IAAI;YACtB,SAAS,EAAE,KAAK;YAChB,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;SAC5C,CAAC;KACH;;IAED,qBAAI,GAAJ,UAAK,OAAuB,EAAE,QAAa;QAA3C,iBAeC;QAdC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAC/B,uBAAI,EAAE,mCAAY,CAAa;QAC/B,2CAAW,CAAmB;;QAGtC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;SACjF;QAED,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC,UAAC,QAAQ;YAC1C,OAAO,KAAI,CAAC,SAAS,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,aAAa;gBAC1D,OAAO,KAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;aACvD,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ;IAED,0BAAS,GAAT,UAAU,OAAuB,EAAE,QAA8C;QAC/E,IAAM,GAAG,GAAG,CAAC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpF,2CAAW,CAAmB;QAEtC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC3B,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACxF;aAAM;YACL,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;YAC1C,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SAClD;KACF;IAED,gCAAe,GAAf;QACE,IAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;QAC1H,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC5C;IAED,iCAAgB,GAAhB,UAAiB,SAAS,EAAE,QAAQ;QAClC,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;QACxD,IAAM,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;QAC1I,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,EAAE,OAAO,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC,CAAC;KAClH;IAED,iCAAgB,GAAhB,UAAiB,GAAG;QAClB,IAAM,GAAG,GAAG,EAAE,CAAC;QACf,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,UAAU,KAAK,EAAE,GAAG;YACvC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;SACrE,CAAC,CAAC;QACH,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACtB;IAtEM,cAAO,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,kBAAkB,EAAE,iBAAiB,CAAC,CAAC;IAuE/E,aAAC;CAAA,IAAA,AAED;;AC1Ee;IAWb,gBAAoB,KAA2B,EAC3B,OAA+B,EAC/B,QAAiC,EACjC,EAAqB,EACrB,gBAAwB,EACxB,eAAsB,EACtB,iBAA0B;QAN1B,UAAK,GAAL,KAAK,CAAsB;QAC3B,YAAO,GAAP,OAAO,CAAwB;QAC/B,aAAQ,GAAR,QAAQ,CAAyB;QACjC,OAAE,GAAF,EAAE,CAAmB;QACrB,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,oBAAe,GAAf,eAAe,CAAO;QACtB,sBAAiB,GAAjB,iBAAiB,CAAS;QAE5C,IAAI,CAAC,QAAQ,GAAG;YACd,IAAI,EAAE,IAAI;YACV,GAAG,EAAE,IAAI;YACT,QAAQ,EAAE,IAAI;YACd,qBAAqB,EAAE,IAAI;YAC3B,WAAW,EAAE,IAAI;YACjB,KAAK,EAAE,IAAI;YACX,WAAW,EAAE,IAAI;YACjB,cAAc,EAAE,IAAI;YACpB,KAAK,EAAE,IAAI;YACX,iBAAiB,EAAE,IAAI;YACvB,gBAAgB,EAAE,CAAC,eAAe,EAAE,WAAW,EAAE,cAAc,CAAC;YAChE,YAAY,EAAE,MAAM;YACpB,cAAc,EAAE;gBACd,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,aAAa;aAC3B;YACD,SAAS,EAAE,KAAK;YAChB,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;SAC5C,CAAC;KACH;IArCM,gBAAS,GAAhB,UAAiB,IAAI;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,UAAC,CAAC,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM;YAClE,OAAO,MAAM,GAAG,MAAM,CAAC,WAAW,EAAE,GAAG,MAAM,CAAC;SAC/C,CAAC,CAAC;KACJ;IAmCD,qBAAI,GAAJ,UAAK,OAAuB,EAAE,QAAa;QAA3C,iBA8BC;QA7BC,OAAO,IAAI,CAAC,EAAE,CAAC,UAAC,OAAO,EAAE,MAAM;YAC7B,OAAO,CAAC,MAAM,CAAC,KAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAEvC,IAAM,SAAS,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;YAChD,IAAA,mBAA8E,EAAtE,cAAI,EAAE,gBAAK,EAAE,8BAAY,EAAE,4BAAW,EAAE,8BAAY,CAAmB;YAE/E,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;gBAC/B,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;aAChD;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBACpC,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;aAC9C;YAED,IAAM,GAAG,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAE,KAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAErF,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,KAAU;gBAC9E,IAAI,YAAY,KAAK,OAAO,IAAI,CAAC,KAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;oBAClD,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC;iBACvB;gBAED,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,KAAK,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;oBACxE,OAAO,MAAM,CAAC,IAAI,KAAK,CACrB,8FAA8F;wBAC9F,6BAA6B,CAC9B,CAAC,CAAC;iBACJ;gBAED,OAAO,CAAC,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;aACjD,CAAC,CAAC,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,MAAM,CAAC,KAAK,CAAC,GAAA,CAAC,CAAC;SAClC,CAAC,CAAC;KACJ;IAED,iCAAgB,GAAhB,UAAiB,SAA4B,EAAE,QAAa;QAA5D,iBA4BC;QA3BC,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;QAE7C,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,UAAC,KAAK,EAAE,GAAG;YACvD,QAAQ,GAAG;gBACT,KAAK,MAAM;oBACT,OAAO,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC;oBAChC,MAAM;gBACR,KAAK,UAAU;oBACb,OAAO,CAAC,KAAK,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;oBACxC,MAAM;gBACR,KAAK,aAAa;oBAChB,OAAO,CAAC,KAAK,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC3C,MAAM;gBACR;oBACE,OAAO,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;aACnC;SACF,CAAC,CAAC;QAEH,IAAI,SAAS,CAAC,KAAK,EAAE;YACnB,OAAO,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;SACjC;QAED,IAAI,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO;YACrD,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;YACzD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;QAEpB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,EAAE,OAAO,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC,CAAC;KAClH;IAED,iCAAgB,GAAhB;QAAA,iBA4BC;QA3BC,IAAM,aAAa,GAAG,EAAE,CAAC;QACzB,IAAM,mBAAmB,GAAG,CAAC,kBAAkB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC,CAAC;QAE3F,OAAO,CAAC,OAAO,CAAC,mBAAmB,EAAE,UAAC,cAAc;YAClD,OAAO,CAAC,OAAO,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAC,SAAS;gBACvD,IAAM,aAAa,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;gBAClD,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,GAAG,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAE1H,IAAI,SAAS,KAAK,cAAc,IAAI,CAAC,UAAU,EAAE;oBAC/C,OAAO;iBACR;gBACD,IAAI,SAAS,KAAK,OAAO,EAAE;oBACzB,IAAM,SAAS,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;oBAChD,UAAU,GAAG,kBAAkB,CAAC,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;iBACxE;gBACD,IAAI,SAAS,KAAK,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;oBACtD,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;oBAC3D,IAAI,KAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;wBAC7B,UAAU,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;qBACzF;iBACF;gBAED,aAAa,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;aAC7C,CAAC,CAAC;SACJ,CAAC,CAAC;QAEH,OAAO,aAAa,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC5D;IAnIM,cAAO,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;IAoItH,aAAC;CAAA,IAAA,AAED;;AC1Je;IAcb,eAAoB,KAA2B,EAC3B,OAA+B,EAC/B,QAAiC,EACjC,EAAqB,EACrB,gBAAwB,EACxB,eAAsB,EACtB,iBAA0B,EAC1B,gBAAwB,EACxB,gBAAwB,EACxB,gBAAwB;QATxB,UAAK,GAAL,KAAK,CAAsB;QAC3B,YAAO,GAAP,OAAO,CAAwB;QAC/B,aAAQ,GAAR,QAAQ,CAAyB;QACjC,OAAE,GAAF,EAAE,CAAmB;QACrB,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,oBAAe,GAAf,eAAe,CAAO;QACtB,sBAAiB,GAAjB,iBAAiB,CAAS;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,qBAAgB,GAAhB,gBAAgB,CAAQ;KAAI;IAEhD,4BAAY,GAAZ,UAAa,IAAY,EAAE,QAAc;QAAzC,iBA0BC;QAzBC,OAAO,IAAI,CAAC,EAAE,CAAC,UAAC,OAAO,EAAE,MAAM;YAC7B,IAAM,QAAQ,GAAG,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAEvD,IAAI,KAAK,GAAG,IAAI,CAAC;YAEjB,QAAQ,QAAQ,CAAC,SAAS;gBACxB,KAAK,KAAK;oBACR,KAAK,GAAG,IAAI,MAAM,CAAC,KAAI,CAAC,KAAK,EAAE,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,gBAAgB,EAAE,KAAI,CAAC,eAAe,CAAC,CAAC;oBAC1F,MAAM;gBACR,KAAK,KAAK;oBACR,KAAK,GAAG,IAAI,MAAM,CAAC,KAAI,CAAC,KAAK,EAAE,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,EAAE,EAAE,KAAI,CAAC,gBAAgB,EAAE,KAAI,CAAC,eAAe,EAAE,KAAI,CAAC,iBAAiB,CAAC,CAAC;oBAC1I,MAAM;gBACR;oBACE,OAAO,MAAM,CAAC,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC;aAClD;YAED,OAAO,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBAClD,IAAI,QAAQ,CAAC,GAAG,EAAE;oBAChB,KAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBAC1C;gBACD,OAAO,CAAC,QAAQ,CAAC,CAAC;aACnB,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gBACb,MAAM,CAAC,KAAK,CAAC,CAAC;aACf,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ;IAED,sBAAM,GAAN,UAAO,QAAgB,EAAE,WAAqB;QAArB,8BAAA,gBAAqB;QAC5C,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;QAC9H,WAAW,CAAC,IAAI,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,WAAW,CAAC,IAAI,CAAC;QAC9D,WAAW,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,IAAI,MAAM,CAAC;QAClD,WAAW,CAAC,eAAe,GAAG,WAAW,CAAC,eAAe,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC;QAEnG,OAAO,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;KAChC;IA3DM,aAAO,GAAG;QACf,OAAO;QACP,SAAS;QACT,UAAU;QACV,IAAI;QACJ,kBAAkB;QAClB,iBAAiB;QACjB,mBAAmB;QACnB,kBAAkB;QAClB,kBAAkB;QAClB,kBAAkB;KACnB,CAAC;IAiDJ,YAAC;CAAA,IAAA,AAED;;ACrEe;IAMb,iBAAoB,OAA6B,EAC7B,gBAAwB;QADxB,YAAO,GAAP,OAAO,CAAsB;QAC7B,qBAAgB,GAAhB,gBAAgB,CAAQ;QAC1C,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACvB;IAED,oCAAkB,GAAlB,UAAoB,WAAmB;QACrC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;QAEpC,IAAI;YACF,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;YAC1C,OAAO,IAAI,CAAC;SACZ;QAAA,OAAO,CAAC,EAAE;YACV,OAAO,KAAK,CAAC;SACd;KACF;IAED,qBAAG,GAAH,UAAI,GAAW;QACb,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;YAC9D,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SACrE;aAAM;YACL,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SAC9B;KACF;IAED,qBAAG,GAAH,UAAI,GAAW,EAAE,KAAa;QAC5B,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;YAC9D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;SACrE;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SAC/B;KACF;IAED,wBAAM,GAAN,UAAO,GAAW;QAChB,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE;YAC9D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;SACjE;aAAM;YACL,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SAC9B;KACF;IA5CM,eAAO,GAAG,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;IA6CnD,cAAC;CAAA,IAAA,AAED;;AC9Ce;IAQb,qBAAoB,gBAAwB,EACxB,gBAAwB,EACxB,iBAA0B;QAVjC,iBAgCd;QAxBqB,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,qBAAgB,GAAhB,gBAAgB,CAAQ;QACxB,sBAAiB,GAAjB,iBAAiB,CAAS;QAG9C,YAAO,GAAG,UAAC,MAA8B;YACvC,IAAI,MAAM,CAAC,mBAAmB,CAAC,EAAE;gBAC/B,OAAO,MAAM,CAAC;aACf;YAED,IAAI,KAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,KAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,EAAE;gBACtF,IAAM,SAAS,GAAG,KAAI,CAAC,gBAAgB,CAAC,WAAW;oBACjD,CAAC,KAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC;gBACnH,IAAI,KAAK,GAAG,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAElD,IAAI,KAAI,CAAC,gBAAgB,CAAC,WAAW,IAAI,KAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE;oBACxE,KAAK,GAAG,KAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,GAAG,GAAG,KAAK,CAAC;iBACvD;gBAED,MAAM,CAAC,OAAO,CAAC,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC;aAC3D;YAED,OAAO,MAAM,CAAC;SACf,CAAC;KApBD;IAPM,mBAAO,GAAd,UAAe,gBAAwB,EAAE,gBAAwB,EAAE,iBAA0B;QAC3F,OAAO,IAAI,WAAW,CAAC,gBAAgB,EAAE,gBAAgB,EAAE,iBAAiB,CAAC,CAAC;KAC/E;IAJM,mBAAO,GAAG,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,CAAC;IA8BjF,kBAAC;CAAA,IAAA;AAED,WAAW,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,CAAC,AAC5F;;ACrCe;IAGb,4BAAoB,aAAoC;QAApC,kBAAa,GAAb,aAAa,CAAuB;QACtD,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;KACtD;IAJM,0BAAO,GAAG,CAAC,eAAe,CAAC,CAAC;IAKrC,yBAAC;CAAA,IAAA,AAED;;ACEA,OAAO,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,CAAC;KAC7B,QAAQ,CAAC,OAAO,EAAE,CAAC,kBAAkB,EAAE,UAAC,gBAAgB,IAAK,OAAA,IAAI,YAAY,CAAC,gBAAgB,CAAC,GAAA,CAAC,CAAC;KACjG,QAAQ,CAAC,kBAAkB,EAAE,MAAM,CAAC,WAAW,CAAC;KAChD,OAAO,CAAC,kBAAkB,EAAE,MAAM,CAAC;KACnC,OAAO,CAAC,iBAAiB,EAAE,KAAK,CAAC;KACjC,OAAO,CAAC,iBAAiB,EAAE,KAAK,CAAC;KACjC,OAAO,CAAC,iBAAiB,EAAE,KAAK,CAAC;KACjC,OAAO,CAAC,kBAAkB,EAAE,MAAM,CAAC;KACnC,OAAO,CAAC,kBAAkB,EAAE,MAAM,CAAC;KACnC,OAAO,CAAC,mBAAmB,EAAE,OAAO,CAAC;KACrC,OAAO,CAAC,uBAAuB,EAAE,WAAW,CAAC;KAC7C,MAAM,CAAC,CAAC,eAAe,EAAE,UAAC,aAAa,IAAK,OAAA,IAAI,kBAAkB,CAAC,aAAa,CAAC,GAAA,CAAC,CAAC,CAAC;AAEvF,UAAe,YAAY,CAAC;;;;"}